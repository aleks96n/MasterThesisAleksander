[gd_scene load_steps=21 format=2]

[ext_resource path="res://Scripts/SendSignal.gd" type="Script" id=1]

[sub_resource type="ArrayMesh" id=29]
resource_local_to_scene = true
surfaces/0 = {
"aabb": AABB( 0, 0, 0, 1, 1.00001, 1 ),
"array_data": PoolByteArray( 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 129, 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 129, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 129, 0, 0, 60, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 129, 0, 0, 60, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 129, 0, 0, 60, 0, 60, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 129, 0, 0, 0, 0, 60, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 127, 0, 0, 0, 0, 60, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 127, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 127, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 127, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 127, 0, 0, 60, 0, 60, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 127, 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 0, 127, 0, 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 127, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 0, 0, 0, 127, 0, 0, 0, 60, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 0, 0, 0, 127, 0, 0, 0, 60, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 128, 63, 0, 127, 0, 0, 0, 60, 0, 60, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 0, 127, 0, 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 129, 0, 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 129, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 128, 63, 0, 129, 0, 0, 0, 60, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 128, 63, 0, 129, 0, 0, 0, 60, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 0, 0, 129, 0, 0, 0, 60, 0, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 129, 0, 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 129, 0, 0, 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 129, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 129, 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 129, 0, 0, 0, 0, 60, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 129, 0, 0, 0, 0, 60, 0, 60, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 129, 0, 0, 0, 0, 0, 0, 60, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 0, 0, 127, 0, 0, 0, 0, 0, 0, 60, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 0, 127, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 128, 63, 127, 0, 0, 0, 0, 60, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 128, 63, 127, 0, 0, 0, 0, 60, 0, 0, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 128, 63, 127, 0, 0, 0, 0, 60, 0, 60, 0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 0, 0, 127, 0, 0, 0, 0, 0, 0, 60 ),
"array_index_data": PoolByteArray(  ),
"blend_shape_data": [  ],
"format": 97299,
"index_count": 0,
"primitive": 4,
"skeleton_aabb": [  ],
"vertex_count": 36
}

[sub_resource type="GDScript" id=30]
resource_local_to_scene = true
script/source = "extends CSGMesh


# Declare member variables here. Examples:
# var a = 2
# var b = \"text\"

onready var csgBox : CSGMesh = self
onready var lastAxis = \"NAN\"
onready var touchedCSG = null
onready var upFace = [0, 4, 5, 6, 10, 11, 12, 13, 14, 15, 16, 17, 24, 28, 29, 30, 34, 35]
onready var downFace = [1, 2, 3, 7, 8, 9, 18, 19, 20, 21, 22, 23, 25, 26, 27, 31, 32, 33]
onready var leftFace = [0, 1, 5, 8, 9, 10, 12, 13, 17, 18, 19, 23, 24, 25, 26, 27, 28, 29]
onready var rightFace = [2, 3, 4, 6, 7, 11, 14, 15, 16, 20, 21, 22, 30, 31, 32, 33, 34, 35]
onready var backFace = [0, 1, 2, 3, 4, 5, 13, 14, 15, 18, 22, 23, 26, 27, 28, 30, 31, 35]
onready var frontFace = [6, 7, 8, 9, 10, 11, 12, 16, 17, 19, 20, 21, 24, 25, 29, 32, 33, 34]
onready var tool_ = MeshDataTool.new()
onready var colShape = get_node(\"CSGRigidBody/CollisionShape\")
onready var hackyMesh = null
onready var allAxis = self.get_children()

onready var bottomBars = [\"BottomTop\", \"BottomBottom\", \"LeftBottom\", \"RightBottom\"]
onready var topBars = {\"BottomUpper\":allAxis[8], \"LeftUpper\":allAxis[10], \"RightUpper\":allAxis[11], \"TopUpper\":allAxis[9],
\"BottomBottom\":allAxis[4], \"BottomTop\":allAxis[5], \"LeftBottom\":allAxis[7], \"RightBottom\":allAxis[6]}
# Called when the node enters the scene tree for the first time.
func _ready():
	allAxis.pop_back()
	tool_.create_from_surface(mesh, 0)

func scaleProper(direction):
	print(lastAxis)
	#csgBox.translation.ro
	if(lastAxis == \"RightUpper\"):
		if(abs(direction.y) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.y -= direction.y
			for i in upFace:
				var vertex = tool_.get_vertex(i)
				vertex.y -= direction.y
				tool_.set_vertex(i, vertex)
			communicateWithAxis(lastAxis, lastAxis[8], null, null, \"y\", direction.y, null, null)
		else:
			if(hackyMesh):
				hackyMesh.translation.x -= direction.x
				topBars[hackyMesh.name].translation.x -= direction.x
			for i in leftFace:
				var vertex = tool_.get_vertex(i)
				vertex.x -= direction.x
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[4], allAxis[5], allAxis[2], allAxis[1], \"x\", direction.x, -direction.x, null)
	elif(lastAxis == \"LeftUpper\"):
		if(abs(direction.y) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.y -= direction.y
			for i in upFace:
				var vertex = tool_.get_vertex(i)
				vertex.y -= direction.y
				tool_.set_vertex(i, vertex)
			communicateWithAxis(lastAxis, null, null, null, \"y\", direction.y, null, null)
		else:
			if(hackyMesh):
				hackyMesh.translation.x -= direction.x
				topBars[hackyMesh.name].translation.x -= direction.x
			for i in rightFace:
				var vertex = tool_.get_vertex(i)
				vertex.x -= direction.x
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[4], allAxis[5], allAxis[0], allAxis[3], \"x\", direction.x, null, null)
	elif(lastAxis == \"TopUpper\"):
		if(abs(direction.y) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.y -= direction.y
			for i in upFace:
				var vertex = tool_.get_vertex(i)
				vertex.y -= direction.y
				tool_.set_vertex(i, vertex)
			communicateWithAxis(lastAxis, null, null, null, \"y\", direction.y, null, null)
		else:
			if(hackyMesh):
				hackyMesh.translation.z -= direction.z
				topBars[hackyMesh.name].translation.z -= direction.z
			for i in frontFace:
				var vertex = tool_.get_vertex(i)
				vertex.z -= direction.z
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[6], allAxis[7], allAxis[1], allAxis[0], \"z\", direction.z, null, null)
	elif(lastAxis == \"BottomUpper\"):
		if(abs(direction.y) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.y -= direction.y
			for i in upFace:
				var vertex = tool_.get_vertex(i)
				vertex.y -= direction.y
				tool_.set_vertex(i, vertex)
			communicateWithAxis(lastAxis, null, null, null, \"y\", direction.y, null, null)
		else:
			if(hackyMesh):
				hackyMesh.translation.z -= direction.z
				topBars[hackyMesh.name].translation.z -= direction.z
			for i in backFace:
				var vertex = tool_.get_vertex(i)
				vertex.z -= direction.z
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[6], allAxis[7], allAxis[3], allAxis[2], \"z\", direction.z, direction.z, null)
	elif(lastAxis == \"BottomRight\"):
		if(abs(direction.z) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.z -= direction.z
			for i in backFace:
				var vertex = tool_.get_vertex(i)
				vertex.z -= direction.z
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[6], allAxis[7], allAxis[4], allAxis[3], \"z\", direction.z, direction.z, null)
		else:
			if(hackyMesh):
				hackyMesh.translation.x -= direction.x
			for i in leftFace:
				var vertex = tool_.get_vertex(i)
				vertex.x -= direction.x
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[4], allAxis[5], allAxis[6], allAxis[1], \"x\", direction.x, -direction.x, null)
	elif(lastAxis == \"BottomLeft\"):
		if(abs(direction.z) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.z -= direction.z
			for i in backFace:
				var vertex = tool_.get_vertex(i)
				vertex.z -= direction.z
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[7], allAxis[6], allAxis[4], allAxis[2], \"z\", direction.z, direction.z, null)
		else:
			if(hackyMesh):
				hackyMesh.translation.x -= direction.x
			for i in rightFace:
				var vertex = tool_.get_vertex(i)
				vertex.x -= direction.x
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[4], allAxis[5], allAxis[7], allAxis[0], \"x\", direction.x, null, null)
	elif(lastAxis == \"TopLeft\"):
		if(abs(direction.z) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.z -= direction.z
			for i in frontFace:
				var vertex = tool_.get_vertex(i)
				vertex.z -= direction.z
				tool_.set_vertex(i, vertex)
			#print(allAxis)
			communicateWithAxis(allAxis[7], allAxis[6], allAxis[5], allAxis[1], \"z\", direction.z, null, null)
		else:
			if(hackyMesh):
				hackyMesh.translation.x -= direction.x
			for i in rightFace:
				var vertex = tool_.get_vertex(i)
				vertex.x -= direction.x
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[5], allAxis[4], allAxis[7], allAxis[3], \"x\", direction.x, null, null)
	elif(lastAxis == \"TopRight\"):
		if(abs(direction.z) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.z -= direction.z
			for i in frontFace:
				var vertex = tool_.get_vertex(i)
				vertex.z -= direction.z
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[7], allAxis[6], allAxis[5], allAxis[0], \"z\", -direction.z, null, direction.z)
		else:
			if(hackyMesh):
				hackyMesh.translation.x -= direction.x
			for i in leftFace:
				var vertex = tool_.get_vertex(i)
				vertex.x -= direction.x
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[5], allAxis[4], allAxis[6], allAxis[2], \"x\", direction.x, -direction.x, null)
	elif(lastAxis == \"BottomBottom\"):
		print(\"Got here\")
		if(abs(direction.y) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.y -= direction.y
			for i in downFace:
				var vertex = tool_.get_vertex(i)
				vertex.y -= direction.y
				tool_.set_vertex(i, vertex)
			communicateWithAxis(lastAxis, null, null, null, \"y\", direction.y, null, null)
		else:
			if(hackyMesh):
				hackyMesh.translation.z -= direction.z
				topBars[hackyMesh.name].translation.z -= direction.z
			for i in backFace:
				var vertex = tool_.get_vertex(i)
				vertex.z -= direction.z
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[6], allAxis[7], allAxis[3], allAxis[2], \"z\", direction.z, direction.z, null)
	elif(lastAxis == \"BottomTop\"):
		if(abs(direction.y) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.y -= direction.y
			for i in downFace:
				var vertex = tool_.get_vertex(i)
				vertex.y -= direction.y
				tool_.set_vertex(i, vertex)
			communicateWithAxis(lastAxis, null, null, null, \"y\", direction.y, null, null)
		else:
			if(hackyMesh):
				hackyMesh.translation.z -= direction.z
				topBars[hackyMesh.name].translation.z -= direction.z
			for i in frontFace:
				var vertex = tool_.get_vertex(i)
				vertex.z -= direction.z
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[6], allAxis[7], allAxis[1], allAxis[0], \"z\", direction.z, null, null)
	elif(lastAxis == \"LeftBottom\"):
		if(abs(direction.y) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.y -= direction.y
			for i in downFace:
				var vertex = tool_.get_vertex(i)
				vertex.y -= direction.y
				tool_.set_vertex(i, vertex)
			communicateWithAxis(lastAxis, null, null, null, \"y\", direction.y, null, null)
		else:
			if(hackyMesh):
				hackyMesh.translation.x -= direction.x
				topBars[hackyMesh.name].translation.x -= direction.x
			for i in rightFace:
				var vertex = tool_.get_vertex(i)
				vertex.x -= direction.x
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[4], allAxis[5], allAxis[0], allAxis[3], \"x\", direction.x, null, null)
	if(lastAxis == \"RightBottom\"):
		if(abs(direction.y) > abs(direction.x)):
			if(hackyMesh):
				hackyMesh.translation.y -= direction.y
				
			for i in downFace:
				var vertex = tool_.get_vertex(i)
				vertex.y -= direction.y
				tool_.set_vertex(i, vertex)
			communicateWithAxis(lastAxis, null, null, null, \"y\", direction.y, null, null)
		else:
			if(hackyMesh):
				hackyMesh.translation.x -= direction.x
				topBars[hackyMesh.name].translation.x -= direction.x
			for i in leftFace:
				var vertex = tool_.get_vertex(i)
				vertex.x -= direction.x
				tool_.set_vertex(i, vertex)
			communicateWithAxis(allAxis[4], allAxis[5], allAxis[2], allAxis[1], \"x\", direction.x, -direction.x, null)
		
	mesh.surface_remove(0)
	tool_.commit_to_surface(mesh)

func receiveName(name, lastMesh):
	lastAxis = name
	hackyMesh = lastMesh
	if(lastAxis != \"NAN\"):
		get_node(lastAxis).disableBar()

func chilling():
	if(lastAxis != \"NAN\"):
		get_node(lastAxis).disableBar()

func movingMe(direction):
	if(touchedCSG):
		self.translation.x = direction.x
		self.translation.y = max(direction.y, touchedCSG.translation.y+0.1)
		self.translation.z = direction.z
	else:
		self.translation = direction

func _on_CSGRigidBody_body_entered(body):
	var helper = body.get_parent()
	if(helper.name == \"Floor\"):
		touchedCSG = helper


func _on_CSGRigidBody_body_exited(body):
	touchedCSG = null
	
#moving side axises makes it so the upper axises have to scale left or right with them
#moving the upper axises makes it so that the side axises have to scale up or down with them
func communicateWithAxis(firstAxis, secondAxis, moveOne, moveTwo, direction, amount, secondAmount, thirdAmount):
	if(direction == \"z\"):
		if(secondAmount):
			firstAxis.scale.z += secondAmount*0.5
			firstAxis.translation.z -= secondAmount*0.45
			secondAxis.scale.z += secondAmount*0.5
			secondAxis.translation.z -= secondAmount*0.45
			
			topBars[firstAxis.name].scale.z += secondAmount*0.5
			topBars[firstAxis.name].translation.z -= secondAmount*0.5
			topBars[secondAxis.name].scale.z += secondAmount*0.5
			topBars[secondAxis.name].translation.z -= secondAmount*0.5
			
			
			moveOne.translation.z -= secondAmount
			moveTwo.translation.z -= secondAmount
			
			if(moveOne.name in topBars):
				topBars[moveOne.name].translation.z -= secondAmount
			if(moveTwo.name in topBars):
				topBars[moveTwo.name].translation.z -= secondAmount
		
			colShape.scale.z += secondAmount*0.5
			colShape.translation.z -= secondAmount*0.45
		elif(thirdAmount):
			firstAxis.scale.z -= thirdAmount*0.5
			firstAxis.translation.z -= thirdAmount*0.45
			secondAxis.scale.z -= thirdAmount*0.5
			secondAxis.translation.z -= thirdAmount*0.45
			
			topBars[firstAxis.name].scale.z -= thirdAmount*0.5
			topBars[firstAxis.name].translation.z -= thirdAmount*0.5
			topBars[secondAxis.name].scale.z -= thirdAmount*0.5
			topBars[secondAxis.name].translation.z -= thirdAmount*0.5
			
			moveOne.translation.z -= thirdAmount
			moveTwo.translation.z -= thirdAmount
			
			if(moveOne.name in topBars):
				topBars[moveOne.name].translation.z -= thirdAmount
			if(moveTwo.name in topBars):
				topBars[moveTwo.name].translation.z -= thirdAmount
			
			colShape.scale.z += amount*0.5
			colShape.translation.z += amount*0.45
		else:
			firstAxis.scale.z -= amount*0.5
			firstAxis.translation.z -= amount*0.45
			secondAxis.scale.z -= amount*0.5
			secondAxis.translation.z -= amount*0.45
			
			topBars[firstAxis.name].scale.z -= amount*0.5
			topBars[firstAxis.name].translation.z -= amount*0.5
			topBars[secondAxis.name].scale.z -= amount*0.5
			topBars[secondAxis.name].translation.z -= amount*0.5
			
			moveOne.translation.z -= amount
			moveTwo.translation.z -= amount
			
			if(moveOne.name in topBars):
				topBars[moveOne.name].translation.z -= amount
			if(moveTwo.name in topBars):
				topBars[moveTwo.name].translation.z -= amount
			
			colShape.scale.z -= amount*0.5
			colShape.translation.z -= amount*0.45
		
	elif(direction == \"x\"):
		if(secondAmount):
			firstAxis.scale.x -= secondAmount*0.5
			secondAxis.scale.x -= secondAmount*0.5
			topBars[firstAxis.name].scale.x -= secondAmount*0.5
			topBars[secondAxis.name].scale.x -= secondAmount*0.5
			
			colShape.scale.x += amount*0.5
			colShape.translation.x -= amount*0.45
		else:
			firstAxis.scale.x -= amount*0.5
			secondAxis.scale.x -= amount*0.5
			topBars[firstAxis.name].scale.x -= amount*0.5
			topBars[secondAxis.name].scale.x -= amount*0.5
			
			colShape.scale.x -= amount*0.5
			colShape.translation.x -= amount*0.45
			
		firstAxis.translation.x -= amount*0.45
		secondAxis.translation.x -= amount*0.45
		
		
		topBars[firstAxis.name].translation.x -= amount*0.5
		topBars[secondAxis.name].translation.x -= amount*0.5
		
		moveOne.translation.x -= amount
		moveTwo.translation.x -= amount
		
		if(moveOne.name in topBars):
			topBars[moveOne.name].translation.x -= amount
		if(moveTwo.name in topBars):
			topBars[moveTwo.name].translation.x -= amount
		
	elif(direction == \"y\"):
		var index = 0
		for elem in allAxis:
			if(elem.name != lastAxis):
				if(firstAxis in bottomBars):
					#touching bottom
					if index < 4:
						elem.scale.y += amount*0.5
						elem.translation.y -= amount*0.5
					elif index > 7:
						elem.translation.y -= amount
					colShape.scale.y += amount*0.1
					colShape.translation.y -= amount*0.1
				else:
					#touching top
					if index < 4:
						elem.scale.y -= amount*0.5
						elem.translation.y -= amount*0.5
					elif index > 7:
						pass
					else:
						elem.translation.y -= amount
					colShape.scale.y -= amount*0.1
					colShape.translation.y -= amount*0.1
					
			index += 1
			
		
	
"

[sub_resource type="CubeMesh" id=58]
resource_local_to_scene = true

[sub_resource type="SpatialMaterial" id=6]
albedo_color = Color( 0.247059, 0.247059, 0.247059, 1 )

[sub_resource type="BoxShape" id=10]

[sub_resource type="CubeMesh" id=59]
resource_local_to_scene = true

[sub_resource type="SpatialMaterial" id=9]
albedo_color = Color( 0, 0.85098, 0.611765, 1 )

[sub_resource type="BoxShape" id=11]

[sub_resource type="BoxShape" id=12]

[sub_resource type="BoxShape" id=7]

[sub_resource type="CubeMesh" id=60]
resource_local_to_scene = true

[sub_resource type="SpatialMaterial" id=27]
albedo_color = Color( 0, 0, 0, 1 )

[sub_resource type="BoxShape" id=28]

[sub_resource type="CubeMesh" id=61]
resource_local_to_scene = true

[sub_resource type="BoxShape" id=23]

[sub_resource type="CubeMesh" id=31]
resource_local_to_scene = true

[sub_resource type="BoxShape" id=32]
extents = Vector3( 1.55453, 1.5175, 1 )

[sub_resource type="BoxShape" id=33]
extents = Vector3( 2.65348, 1.40341, 1 )

[sub_resource type="BoxShape" id=34]
extents = Vector3( 1, 0.548616, 1 )

[node name="CSGBrick" type="CSGMesh"]
use_in_baked_light = true
mesh = SubResource( 29 )
script = SubResource( 30 )

[node name="TopLeft" type="MeshInstance" parent="."]
transform = Transform( 0.008, -1.13274e-13, 1.11022e-15, 1.78178e-15, 0.507, 1.11022e-16, -1.11022e-16, -3.55271e-15, 0.013, 0.99209, 0.500319, 0.990636 )
visible = false
mesh = SubResource( 58 )
material/0 = SubResource( 6 )
script = ExtResource( 1 )

[node name="RigidBody" type="RigidBody" parent="TopLeft"]
transform = Transform( 1, 1.33108e-11, 8.51906e-13, 5.51319e-14, 1, 2.58673e-14, 7.34383e-15, 2.70991e-13, 1, 0, 0, 0 )
collision_layer = 2
mode = 1
contacts_reported = 1000
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="TopLeft/RigidBody"]
transform = Transform( 3.02316, 2.80162e-12, -6.25278e-13, 1.59075e-15, 0.999729, -2.66454e-15, -2.84217e-14, 4.54747e-13, 3.19481, 0, 0.0245345, -1.01591 )
shape = SubResource( 10 )

[node name="bar" type="MeshInstance" parent="TopLeft"]
transform = Transform( 3.02886, 1.86981e-12, -1.42109e-13, 1.97972e-14, 1.02641, -1.11022e-15, 1.98952e-13, 2.72848e-12, 1.27205, -0.111038, -0.0174506, 0.406433 )
visible = false
mesh = SubResource( 59 )
material/0 = SubResource( 9 )

[node name="TopRight" type="MeshInstance" parent="."]
transform = Transform( 0.008, -1.06247e-13, 4.44089e-16, 1.67075e-15, 0.51296, 5.55112e-16, -1.11022e-16, -2.13163e-14, 0.013, 0.00422812, 0.492806, 0.989172 )
visible = false
mesh = SubResource( 58 )
material/0 = SubResource( 6 )
script = ExtResource( 1 )

[node name="RigidBody" type="RigidBody" parent="TopRight"]
transform = Transform( 1, 1.24943e-11, 3.40763e-13, 5.17347e-14, 1, 1.29349e-13, 7.34383e-15, 1.62611e-12, 1, 0, 0, 0 )
collision_layer = 2
mode = 1
contacts_reported = 1000
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="TopRight/RigidBody"]
transform = Transform( 3.02316, 9.86037e-13, -7.38964e-13, -1.88104e-16, 0.999606, -1.33227e-15, 0, 1.81899e-12, 3.19481, 1.52588e-05, 0.04141, -0.903236 )
shape = SubResource( 11 )

[node name="bar" type="MeshInstance" parent="TopRight"]
transform = Transform( 3.02886, -8.58672e-13, -1.7053e-13, 1.09129e-14, 1.03047, 4.44089e-16, 2.55795e-13, 1.13687e-12, 1.27205, -9.91821e-05, -0.00264275, -0.0131683 )
visible = false
mesh = SubResource( 59 )
material/0 = SubResource( 9 )

[node name="BottomRight" type="MeshInstance" parent="."]
transform = Transform( 0.00812593, -1.41872e-13, 6.66134e-16, 2.2242e-15, 0.520389, 3.33067e-16, -3.33067e-16, -1.42109e-14, 0.013378, 0.00422746, 0.491472, 0.0118398 )
visible = false
mesh = SubResource( 58 )
material/0 = SubResource( 6 )
script = ExtResource( 1 )

[node name="RigidBody" type="RigidBody" parent="BottomRight"]
transform = Transform( 1, 1.64238e-11, 4.9564e-13, 6.77997e-14, 1, 7.54077e-14, 2.13632e-14, 1.05332e-12, 1, 0, 0, 0 )
collision_layer = 2
mode = 1
contacts_reported = 1000
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="BottomRight/RigidBody"]
transform = Transform( 2.97632, 3.70211e-12, -2.27374e-13, 7.18769e-16, 1, -4.44089e-16, 0, 0, 3.10454, 5.34058e-05, 0.0859114, 1.19209e-07 )
shape = SubResource( 12 )

[node name="bar" type="MeshInstance" parent="BottomRight"]
transform = Transform( 2.98192, 2.79261e-12, 0, 7.82304e-15, 1, 0, 2.27374e-13, 6.82121e-13, 1.23611, 0, 0, 0.0583804 )
visible = false
mesh = SubResource( 59 )
material/0 = SubResource( 9 )

[node name="BottomLeft" type="MeshInstance" parent="."]
transform = Transform( 0.00799999, -8.48126e-14, 1.9984e-15, 1.33769e-15, 0.504, 4.44089e-16, -1.11022e-16, -1.77636e-14, 0.013, 0.999439, 0.500078, 0.0102063 )
visible = false
mesh = SubResource( 58 )
material/0 = SubResource( 6 )
script = ExtResource( 1 )

[node name="RigidBody" type="RigidBody" parent="BottomLeft"]
transform = Transform( 1, 9.96251e-12, 1.53343e-12, 4.13752e-14, 1, 1.03464e-13, 7.34383e-15, 1.35489e-12, 1, 0, 0, 0 )
collision_layer = 2
mode = 1
contacts_reported = 1000
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="BottomLeft/RigidBody"]
transform = Transform( 3.02316, 1.89612e-12, -9.09495e-13, 1.14291e-15, 1.00088, 0, -5.68434e-14, 0, 3.19481, -0.918365, 0.0208148, 0.408631 )
shape = SubResource( 7 )

[node name="bar" type="MeshInstance" parent="BottomLeft"]
transform = Transform( 3.02886, -1.76817e-12, -2.84217e-13, 2.46784e-14, 1.03252, -3.10862e-15, 5.68434e-14, 5.68434e-12, 1.27205, -1.0296, -0.0170757, -0.564027 )
visible = false
mesh = SubResource( 59 )
material/0 = SubResource( 9 )

[node name="BottomUpper" type="MeshInstance" parent="."]
transform = Transform( 0.496, 0, 0, 0, -0.01, 0, 0, 0, -0.013, 0.502693, 1.01508, 0.00335085 )
visible = false
mesh = SubResource( 60 )
material/0 = SubResource( 27 )
script = ExtResource( 1 )

[node name="RigidBody" type="RigidBody" parent="BottomUpper"]
collision_layer = 2
mode = 1
contacts_reported = 1999
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="BottomUpper/RigidBody"]
shape = SubResource( 28 )

[node name="bar" type="MeshInstance" parent="BottomUpper"]
transform = Transform( 0.957268, 4.21774e-15, -6.08574e-08, -2.16533e-15, 1.86429, 1.24928e-11, 4.18437e-08, -1.67285e-11, 1.39225, -0.0137296, -0.0369186, 0.087635 )
visible = false
mesh = SubResource( 61 )
material/0 = SubResource( 9 )

[node name="TopUpper" type="MeshInstance" parent="."]
transform = Transform( 0.490897, 0, 0, 0, 0.0170722, 0, 0, 0, 0.009, 0.502459, 1.0062, 0.995738 )
visible = false
mesh = SubResource( 58 )
material/0 = SubResource( 6 )
script = ExtResource( 1 )

[node name="RigidBody" type="RigidBody" parent="TopUpper"]
collision_layer = 2
mode = 1
contacts_reported = 1000
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="TopUpper/RigidBody"]
shape = SubResource( 23 )

[node name="bar" type="MeshInstance" parent="TopUpper"]
transform = Transform( 1.01783, 3.35018e-16, -1.1069e-07, -3.17791e-16, 1.07152, 2.51062e-11, 4.44909e-08, -1.06235e-11, 2.53228, -0.00901437, -0.0326157, -1.4351 )
visible = false
mesh = SubResource( 61 )
material/0 = SubResource( 9 )

[node name="RightUpper" type="MeshInstance" parent="."]
transform = Transform( 0.00991368, 0, 0, 0, 0.0142445, 0, 0, 0, 0.487793, 0.0093717, 0.999086, 0.503448 )
visible = false
mesh = SubResource( 31 )
material/0 = SubResource( 6 )
script = ExtResource( 1 )

[node name="bar" type="MeshInstance" parent="RightUpper"]
transform = Transform( 1.83411, 2.14036e-13, 7.28515e-14, 1.48009e-13, -1.45324e-06, -1.5773, -1.10634e-16, 0.970857, -1.98659e-09, 0.186539, -0.216629, -0.0152695 )
visible = false
mesh = SubResource( 61 )
skeleton = NodePath("")
material/0 = SubResource( 9 )

[node name="RigidBody" type="RigidBody" parent="RightUpper"]
mode = 1
contacts_reported = 1000
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="RightUpper/RigidBody"]
shape = SubResource( 32 )

[node name="LeftUpper" type="MeshInstance" parent="."]
transform = Transform( 0.009, 0, 0, 0, 0.0188994, 0, 0, 0, 0.469415, 0.994296, 1.00447, 0.493506 )
visible = false
mesh = SubResource( 58 )
material/0 = SubResource( 6 )
script = ExtResource( 1 )
__meta__ = {
"_editor_description_": ""
}

[node name="RigidBody" type="RigidBody" parent="LeftUpper"]
collision_layer = 2
mode = 1
contacts_reported = 1000
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="LeftUpper/RigidBody"]
shape = SubResource( 33 )

[node name="bar" type="MeshInstance" parent="LeftUpper"]
transform = Transform( 2.04932, 1.30427e-15, 2.66804e-13, -2.66454e-15, 1.00312, 1.17995e-11, -5.22571e-13, -1.13126e-11, 1.0463, -0.723816, 0.0276337, 0.00488654 )
visible = false
mesh = SubResource( 61 )
material/0 = SubResource( 9 )

[node name="BottomBottom" type="MeshInstance" parent="."]
transform = Transform( 0.496, 0, 0, 0, -0.01, 0, 0, 0, -0.013, 0.502693, -0.00364435, 0.00335085 )
visible = false
mesh = SubResource( 60 )
material/0 = SubResource( 27 )
script = ExtResource( 1 )

[node name="RigidBody" type="RigidBody" parent="BottomBottom"]
collision_layer = 2
mode = 1
contacts_reported = 1000
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="BottomBottom/RigidBody"]
shape = SubResource( 28 )

[node name="bar" type="MeshInstance" parent="BottomBottom"]
transform = Transform( 0.957268, 4.21774e-15, -6.08574e-08, -2.16533e-15, 1.86429, 1.24928e-11, 4.18437e-08, -1.67285e-11, 1.39225, -0.0137296, -0.0369186, 0.087635 )
visible = false
mesh = SubResource( 61 )
material/0 = SubResource( 9 )

[node name="BottomTop" type="MeshInstance" parent="."]
transform = Transform( 0.496, 0, 0, 0, -0.01, 0, 0, 0, -0.013, 0.502693, -0.00364435, 0.998103 )
visible = false
mesh = SubResource( 60 )
material/0 = SubResource( 27 )
script = ExtResource( 1 )

[node name="RigidBody" type="RigidBody" parent="BottomTop"]
collision_layer = 2
mode = 1
contacts_reported = 1000
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="BottomTop/RigidBody"]
shape = SubResource( 28 )

[node name="bar" type="MeshInstance" parent="BottomTop"]
transform = Transform( 0.957268, 4.21774e-15, -6.08574e-08, -2.16533e-15, 1.86429, 1.24928e-11, 4.18437e-08, -1.67285e-11, 1.39225, -0.0137296, -0.0369186, 0.087635 )
visible = false
mesh = SubResource( 61 )
material/0 = SubResource( 9 )

[node name="LeftBottom" type="MeshInstance" parent="."]
transform = Transform( 0.009, 0, 0, 0, 0.0188994, 0, 0, 0, 0.486924, 0.994296, 0.00161612, 0.493506 )
visible = false
mesh = SubResource( 58 )
material/0 = SubResource( 6 )
script = ExtResource( 1 )
__meta__ = {
"_editor_description_": ""
}

[node name="RigidBody" type="RigidBody" parent="LeftBottom"]
collision_layer = 2
mode = 1
contacts_reported = 1000
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="LeftBottom/RigidBody"]
shape = SubResource( 33 )

[node name="bar" type="MeshInstance" parent="LeftBottom"]
transform = Transform( 2.04932, 1.30427e-15, 2.66804e-13, -2.66454e-15, 1.00312, 1.17995e-11, -5.22571e-13, -1.13126e-11, 1.0463, -0.723816, 0.0276337, 0.00488654 )
visible = false
mesh = SubResource( 61 )
material/0 = SubResource( 9 )

[node name="RightBottom" type="MeshInstance" parent="."]
transform = Transform( 0.009, 0, 0, 0, 0.0188994, 0, 0, 0, 0.486924, -0.00955963, 0.00161612, 0.493506 )
visible = false
mesh = SubResource( 58 )
material/0 = SubResource( 6 )
script = ExtResource( 1 )
__meta__ = {
"_editor_description_": ""
}

[node name="RigidBody" type="RigidBody" parent="RightBottom"]
collision_layer = 2
mode = 1
contacts_reported = 1000
contact_monitor = true
sleeping = true

[node name="CollisionShape" type="CollisionShape" parent="RightBottom/RigidBody"]
shape = SubResource( 33 )

[node name="bar" type="MeshInstance" parent="RightBottom"]
transform = Transform( 2.04932, 1.30427e-15, 2.66804e-13, -2.66454e-15, 1.00312, 1.17995e-11, -5.22571e-13, -1.13126e-11, 1.0463, -0.723816, 0.0276337, 0.00488654 )
visible = false
mesh = SubResource( 61 )
material/0 = SubResource( 9 )

[node name="CSGRigidBody" type="RigidBody" parent="."]
transform = Transform( 1, 3.83714e-15, 0, 2.66049e-16, 1, 0, 0, 0, 1, 0, 0, 0 )
collision_layer = 2
mode = 1
continuous_cd = true
contacts_reported = 9999
contact_monitor = true
can_sleep = false

[node name="CollisionShape" type="CollisionShape" parent="CSGRigidBody"]
transform = Transform( 0.5, -1.01302e-15, 0, 5.05192e-16, 1.00261, 0, 0, 0, 0.5, 0.502703, 0.485465, 0.495193 )
shape = SubResource( 34 )

[connection signal="body_exited" from="TopLeft/RigidBody" to="TopLeft" method="_on_RigidBody_body_exited"]
[connection signal="body_exited" from="TopRight/RigidBody" to="TopRight" method="_on_RigidBody_body_exited"]
[connection signal="body_exited" from="BottomRight/RigidBody" to="BottomRight" method="_on_RigidBody_body_exited"]
[connection signal="body_exited" from="BottomLeft/RigidBody" to="BottomLeft" method="_on_RigidBody_body_exited"]
[connection signal="body_exited" from="BottomUpper/RigidBody" to="BottomUpper" method="_on_RigidBody_body_exited"]
[connection signal="body_exited" from="TopUpper/RigidBody" to="TopUpper" method="_on_RigidBody_body_exited"]
[connection signal="body_exited" from="RightUpper/RigidBody" to="RightUpper" method="_on_RigidBody_body_exited"]
[connection signal="body_exited" from="LeftUpper/RigidBody" to="LeftUpper" method="_on_RigidBody_body_exited"]
[connection signal="body_exited" from="BottomBottom/RigidBody" to="BottomBottom" method="_on_RigidBody_body_exited"]
[connection signal="body_exited" from="BottomTop/RigidBody" to="BottomTop" method="_on_RigidBody_body_exited"]
[connection signal="body_exited" from="LeftBottom/RigidBody" to="LeftBottom" method="_on_RigidBody_body_exited"]
[connection signal="body_exited" from="RightBottom/RigidBody" to="RightBottom" method="_on_RigidBody_body_exited"]
[connection signal="body_entered" from="CSGRigidBody" to="." method="_on_CSGRigidBody_body_entered"]
[connection signal="body_exited" from="CSGRigidBody" to="." method="_on_CSGRigidBody_body_exited"]
